System.register(["jimu-core","jimu-arcgis","jimu-ui","esri/widgets/Swipe","jimu-ui/basic/list-tree","jimu-core/dnd","esri/widgets/Legend"],(function(e,t){var n={},l={},r={},i={},a={},o={},s={};return{setters:[function(e){n.AppMode=e.AppMode,n.DataSourceManager=e.DataSourceManager,n.Immutable=e.Immutable,n.React=e.React,n.ReactRedux=e.ReactRedux,n.classNames=e.classNames,n.css=e.css,n.getAppStore=e.getAppStore,n.hooks=e.hooks,n.jsx=e.jsx,n.polished=e.polished},function(e){l.DataSourceTypes=e.DataSourceTypes,l.JimuMapViewComponent=e.JimuMapViewComponent,l.MapViewManager=e.MapViewManager},function(e){r.Alert=e.Alert,r.CollapsablePanel=e.CollapsablePanel,r.DistanceUnits=e.DistanceUnits,r.Icon=e.Icon,r.Switch=e.Switch,r.WidgetPlaceholder=e.WidgetPlaceholder,r.defaultMessages=e.defaultMessages},function(e){i.default=e.default},function(e){a.List=e.List},function(e){o.interact=e.interact},function(e){s.default=e.default}],execute:function(){e((()=>{var e={48623:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" d="M9 0v20h1V0H9ZM0 3.5A1.5 1.5 0 0 1 1.5 2h5v1h-5a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5h5v1h-5A1.5 1.5 0 0 1 0 16.5v-13ZM20 16.5a1.5 1.5 0 0 1-1.5 1.5h-6v-1h6a.5.5 0 0 0 .5-.5v-13a.5.5 0 0 0-.5-.5h-6V2h6A1.5 1.5 0 0 1 20 3.5v13Z"></path><path fill="#000" d="m6.354 6.646.707.708L4.414 10l2.647 2.646-.707.708L3 10l3.354-3.354ZM12 12.646l.707.707L16.061 10l-3.354-3.354-.707.708L14.646 10 12 12.646Z"></path></svg>'},73982:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M7.5 1.5a.5.5 0 0 1 1 0v2.8a.5.5 0 0 1-1 0V1.5Zm6.028.874a.5.5 0 0 1 .062.705l-1.414 1.685a.5.5 0 1 1-.766-.643l1.414-1.685a.5.5 0 0 1 .704-.062Zm-10.352.062a.5.5 0 1 0-.766.643l1.414 1.685a.5.5 0 0 0 .766-.643L3.176 2.436ZM6.244 10.6H5.43h.814ZM.961 9.8h4.88c.211 0 .359.19.359.4a1.8 1.8 0 0 0 3.555.4h.814a2.6 2.6 0 0 1-5.139 0H.8v3.6h14.4v-3.6H9.755c.03-.129.045-.263.045-.4 0-.21.148-.4.358-.4h4.881l-2.267-3.4H3.228L.961 9.8Zm11.81-4.2a.8.8 0 0 1 .666.356l2.429 3.642a.8.8 0 0 1 .134.444V14.2a.8.8 0 0 1-.8.8H.8a.8.8 0 0 1-.8-.8v-4.158a.8.8 0 0 1 .134-.444l2.429-3.642a.8.8 0 0 1 .665-.356h9.544Z" clip-rule="evenodd"></path></svg>'},24923:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0Zm1 0A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM5.354 6.646l-.708.708L8 10.707l3.354-3.353-.707-.708L8 9.293 5.354 6.646Z" clip-rule="evenodd"></path></svg>'},65205:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m10.646 10.06.707-.707L8 6 4.646 9.353l.708.707L8 7.414l2.646 2.646Z"></path><path fill="#000" fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-1 0A6 6 0 1 1 2 8a6 6 0 0 1 12 0Z" clip-rule="evenodd"></path></svg>'},79964:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667L8 2.125Zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47L7.118 1.653ZM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995Zm1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" clip-rule="evenodd"></path></svg>'},46771:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#000" fill-rule="nonzero" d="m6 11.943 4 1.711V4.057L6 2.346v9.597Zm-1 .17V2.494l-4 1.48v9.619l4-1.48Zm6 1.393 4-1.48V2.407l-4 1.48v9.619ZM0 15V3.307L5.75 1.18l4.528 1.937L16 1v11.693l-5.75 2.127-4.528-1.937L0 15Z"></path></svg>'},91915:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#000" fill-rule="nonzero" d="M7.5 4V1.39C6.402 2.12 5.565 2.99 4.985 4H7.5Zm0 3.5V5H4.512a8.13 8.13 0 0 0-.5 2.5H7.5Zm0 3.5V8.5H4.012a8.13 8.13 0 0 0 .5 2.5H7.5Zm0 3.61V12H4.985c.58 1.01 1.417 1.88 2.515 2.61Zm2.543.087A7.014 7.014 0 0 0 13.745 12h-1.6a8.278 8.278 0 0 1-2.102 2.697ZM11.015 12H8.5v2.61c1.098-.73 1.935-1.6 2.515-2.61Zm1.974-3.5a9.328 9.328 0 0 1-.441 2.5h1.778c.365-.767.594-1.61.656-2.5H12.99Zm-1.001 0H8.5V11h2.988a8.13 8.13 0 0 0 .5-2.5Zm.56-3.5c.254.775.401 1.609.441 2.5h1.993a6.957 6.957 0 0 0-.656-2.5h-1.778Zm-1.06 0H8.5v2.5h3.488a8.13 8.13 0 0 0-.5-2.5Zm-1.445-3.697c.91.78 1.611 1.68 2.102 2.697h1.6a7.014 7.014 0 0 0-3.702-2.697ZM8.5 4h2.515c-.58-1.01-1.417-1.88-2.515-2.61V4Zm-.527 12a8 8 0 1 1 .055-16 8 8 0 0 1-.055 16ZM5.957 1.302A7.014 7.014 0 0 0 2.255 4h1.6a8.278 8.278 0 0 1 2.102-2.697ZM3.011 7.5c.04-.891.187-1.725.441-2.5H1.674a6.957 6.957 0 0 0-.656 2.5H3.01Zm.441 3.5a9.328 9.328 0 0 1-.441-2.5H1.018c.062.89.291 1.733.656 2.5h1.778Zm2.505 3.697A8.278 8.278 0 0 1 3.855 12h-1.6a7.014 7.014 0 0 0 3.702 2.697Z"></path></svg>'},9600:e=>{"use strict";e.exports=s},97629:e=>{"use strict";e.exports=i},26826:e=>{"use strict";e.exports=l},48891:e=>{"use strict";e.exports=n},54020:e=>{"use strict";e.exports=o},30726:e=>{"use strict";e.exports=r},59587:e=>{"use strict";e.exports=a}},t={};function c(n){var l=t[n];if(void 0!==l)return l.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="";var u={};return c.p=window.jimuConfig.baseUrl,(()=>{"use strict";c.r(u),c.d(u,{__set_webpack_public_path__:()=>de,default:()=>ue});var e=c(48891),t=c(26826),n=c(30726);const l={_widgetLabel:"Swipe",leadingLayers:"Leading layers",trailingLayers:"Trailing layers",webSceneNotSupported:"Web scenes are not supported.",noConfiguredLayerText:"There is currently no configured layer.",noValidLayerText:"There is no valid layer.",mapOccupiedMsg:"Another active Swipe that connects to the targeted Map has been toggled off.",runtimeLayers:"Runtime layers"};var r,i,a=c(48623),o=c.n(a);!function(e){e.SimpleHorizontal="SIMPLE_HORIZONTAL",e.SimpleVertical="SIMPLE_VERTICAL",e.AdvancedHorizontal="ADVANCED_HORIZONTAL",e.AdvancedVertical="ADVANCED_VERTICAL"}(r||(r={})),function(e){e.SwipeBetweenLayers="SWIPE_BETWEEN_LAYERS_OF_ONE_MAP",e.SwipeBetweenMaps="SWIPE_BETWEEN_WEBMAPS_OR_WEBSCENES"}(i||(i={}));var s=c(97629);const{useEffect:d,useRef:p}=e.React;function v(t){var n,l;const{widgetId:i,activeMapView:a,leadingLayersId:o,trailingLayersId:c,swipeStyle:u,sliderPosition:v,dividerColor:m,handlerColor:h,isDesignMode:y}=t,g=null===(l=null===(n=(0,e.getAppStore)().getState())||void 0===n?void 0:n.appContext)||void 0===l?void 0:l.isRTL,w=null==a?void 0:a.mapWidgetId,f=p(null),x=u===r.SimpleHorizontal&&g,b=p(x?100-v.distance:v.distance),L=p(document.querySelector(`div[data-widgetid=${w}]`)),S=p(!1);d((()=>{b.current=x?100-v.distance:v.distance}),[x,v]),d((()=>{var e;const t=null===(e=L.current)||void 0===e?void 0:e.querySelector(".esri-swipe");t&&(t.style.pointerEvents=y?null:"none")}),[y,L]);const I=(e,t)=>{return n=this,l=void 0,i=function*(){return yield e.whenJimuLayerViewLoaded(t)},new((r=void 0)||(r=Promise))((function(e,t){function a(e){try{s(i.next(e))}catch(e){t(e)}}function o(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,o)}s((i=i.apply(n,l||[])).next())}));var n,l,r,i};return d((()=>()=>{S.current=!0}),[]),d((()=>{function e(){var e;f.current&&(f.current.position=0,f.current.leadingLayers.removeAll(),f.current.trailingLayers.removeAll(),null===(e=null==a?void 0:a.view)||void 0===e||e.ui.remove(f.current))}return(null==a?void 0:a.view)&&function(){var t,n;const l=null===(t=null==o?void 0:o.asMutable())||void 0===t?void 0:t.map((e=>I(a,e))),d=null===(n=null==c?void 0:c.asMutable())||void 0===n?void 0:n.map((e=>I(a,e))),p=u===r.SimpleVertical?"vertical":"horizontal";l&&d&&Promise.all(l.concat(d)).then((t=>{if(S.current)return;const n=null==o?void 0:o.asMutable().map((e=>t.filter((t=>t.id===e))[0].layer)),l=null==c?void 0:c.asMutable().map((e=>t.filter((t=>t.id===e))[0].layer));e(),f.current=new s.default({id:i,leadingLayers:n,trailingLayers:l,view:null==a?void 0:a.view,direction:p,position:b.current}),null==a||a.view.ui.add(f.current),f.current.watch("position",(()=>{f.current.position&&(b.current=f.current.position)})),f.current.when((()=>{if(S.current)return void e();L.current.querySelector(".esri-swipe__divider").style.backgroundColor=m;const t=L.current.querySelector(".esri-swipe__handle");t&&(t.style.backgroundColor=h)}))}))}(),()=>{e()}}),[i,a,v,o,c,u,m,h]),null}var m=c(59587);const h=t=>{const{layerList:n,onChange:l,isAllowDeactivateLayers:r,highlightIndex:i}=t,[a,o]=e.React.useState((()=>null==n?void 0:n.map((e=>({itemKey:e.layerId,itemStateTitle:e.title,itemStateChecked:!!r&&e.selected,itemStateDisabled:!e.visible,isCheckboxDisabled:!e.visible})))));return e.React.useEffect((()=>{const e=null==n?void 0:n.map((e=>({itemKey:e.layerId,itemStateTitle:e.title,itemStateChecked:!!r&&e.selected,itemStateDisabled:!e.visible,isCheckboxDisabled:!e.visible})));o(e)}),[n,r]),(0,e.jsx)("div",{className:"layer-list",css:y(i)},(0,e.jsx)(m.List,{size:"default",className:"w-100",itemsJson:a,isMultiSelection:r,dndEnabled:!1,disableDoubleClickTitle:!0,onUpdateItem:(e,t)=>{if(!r)return;const[n,i]=e.itemJsons;o([...i]),l(n.itemKey)}}))};function y(t){return e.css`
    .jimu-tree-item_template-card .jimu-tree-item__body:hover {
      background-color: transparent !important;
    }
    .jimu-tree-main {
      .jimu-tree-item:nth-of-type(${t}) {
        .jimu-tree-item__body {
          border-left: .125rem solid var(--primary) !important;
        }
      }
    }
  `}var g=c(73982),w=c.n(g);const f=t=>{const n=window.SVG,{className:l}=t,r=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(n[l[r]]=e[l[r]])}return n}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",l);return n?e.React.createElement(n,Object.assign({className:i,src:w()},r)):e.React.createElement("svg",Object.assign({className:i},r))},x=t=>{const{swipeLayerMode:n}=t,r=e.hooks.useTranslation(l);return(0,e.jsx)("div",{css:b,className:"no-layer-placeholder w-100"},(0,e.jsx)("div",{className:"no-layer-placeholder-icon"},(0,e.jsx)(f,{size:32,color:"var(--dark-500)"})),(0,e.jsx)("div",{className:"no-layer-placeholder-text"},(0,e.jsx)("span",null,r(n?"noConfiguredLayerText":"noValidLayerText"))))},b=e.css`
.no-layer-placeholder-text, .no-layer-placeholder-icon{
  display: table;
  margin: 0 auto;
}
.no-layer-placeholder-text {
  color: var(--dark-500);
  font-size: 13px;
  margin-top: 16px;
  text-align: center;
}
.no-layer-placeholder-icon {
  color: var(--dark-800);
}
`;var L=c(65205),S=c.n(L),I=c(24923),M=c.n(I);const{useState:j,useEffect:C,useRef:V}=e.React;function E(t){var r,i,a,o;const{swipeMapViewList:s,activeMapView:c,isAllowDeactivateLayers:u,handlePanelSelectedLeadingLayers:d,handlePanelSelectedTrailingLayers:p,runtimeAddedLayers:v,handleRuntimePanelSelectedLeadingLayers:m,handleRuntimePanelSelectedTrailingLayers:y}=t,[g,w]=j(!1),[f,b]=j(!1),[L,I]=j(!1),[E,O]=j(!1),P=e.React.useRef([]),k=e.React.useRef([]),R=e.React.useRef([]),N=e.React.useRef([]),D=e.hooks.useTranslation(l),[T,$]=j(null),[q,_]=j(null),[Z,z]=j([]),[H,J]=j([]),F=V(T),B=V(q),W=V(Z),U=V(H),[G,Y]=j((null===(r=null==s?void 0:s[null==c?void 0:c.id])||void 0===r?void 0:r.leadingLayersId)||(0,e.Immutable)([])),[X,K]=j((null===(i=null==s?void 0:s[null==c?void 0:c.id])||void 0===i?void 0:i.trailingLayersId)||(0,e.Immutable)([])),[Q,ee]=j((0,e.Immutable)([])),[te,ne]=j((0,e.Immutable)([])),le=(e,t)=>{return n=this,l=void 0,i=function*(){return yield e.whenJimuLayerViewLoaded(t)},new((r=void 0)||(r=Promise))((function(e,t){function a(e){try{s(i.next(e))}catch(e){t(e)}}function o(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,o)}s((i=i.apply(n,l||[])).next())}));var n,l,r,i},re=e.hooks.useEventCallback(((t,n,l,r)=>{var i,a,o;const d=t?"leadingLayersId":"trailingLayersId",p=null===(o=null===(a=null===(i=null==s?void 0:s[null==c?void 0:c.id])||void 0===i?void 0:i[d])||void 0===a?void 0:a.asMutable())||void 0===o?void 0:o.map((e=>le(c,e)));p&&Promise.all(p).then((t=>{const i=t.map((e=>({layerId:e.id,title:e.layer.title,selected:!0,visible:e.layer.visible,allowOperation:u})));n(i),l.current=i;const a=[];null==i||i.forEach((e=>{e.selected&&a.push(e.layerId)})),r((0,e.Immutable)(a))}))}));C((()=>{re(!0,$,F,d),re(!1,_,B,p)}),[s,c,u,d,p,re]),C((()=>{const t=null==v?void 0:v.asMutable({deep:!0}).map((e=>{const t=c.jimuLayerViews[e];return{layerId:e,title:t.layer.title,selected:!1,visible:t.layer.visible,allowOperation:!0}}));z(t),W.current=t,J(t),U.current=t;const n=[];null==t||t.forEach((e=>{e.selected&&n.push(e.layerId)})),m((0,e.Immutable)(n)),y((0,e.Immutable)(n))}),[c,m,y,v]);const ie=e.hooks.useEventCallback(((t,n,l,r)=>{var i,a,o;const u=t?"leadingLayersId":"trailingLayersId",d=null===(o=null===(a=null===(i=null==s?void 0:s[null==c?void 0:c.id])||void 0===i?void 0:i[u])||void 0===a?void 0:a.asMutable())||void 0===o?void 0:o.map((e=>le(c,e)));d&&Promise.all(d).then((t=>{t.forEach((t=>{const i=[];i.push(t.layer.watch("visible",(()=>{const r=t.layer.visible,i=JSON.parse(JSON.stringify(n.current));i.forEach((e=>{e.layerId===t.id&&(e.visible=r)})),l((0,e.Immutable)(i)),n.current=(0,e.Immutable)(i)}))),r.current=i}))}))}));C((()=>{const e=P.current,t=k.current;return ie(!0,F,$,P),ie(!1,B,_,k),()=>{e.forEach((e=>{e.remove()})),t.forEach((e=>{e.remove()}))}}),[s,c,ie]);const ae=e.hooks.useEventCallback(((t,n,l,r)=>{(t?Z:H).forEach((t=>{const i=c.jimuLayerViews[t.layerId],a=[];a.push(i.layer.watch("visible",(()=>{const t=i.layer.visible,r=JSON.parse(JSON.stringify(n.current));r.forEach((e=>{e.layerId===i.id&&(e.visible=t)})),l((0,e.Immutable)(r)),n.current=(0,e.Immutable)(r)}))),r.current=a}))}));C((()=>{const e=R.current,t=N.current;return ae(!0,W,z,R),ae(!1,U,J,N),()=>{e.forEach((e=>{e.remove()})),t.forEach((e=>{e.remove()}))}}),[c,Z,H,ae]),C((()=>{d(G)}),[d,G]),C((()=>{p(X)}),[p,X]),C((()=>{m(Q)}),[m,Q]),C((()=>{y(te)}),[y,te]);const oe=()=>{w(!g)},se=()=>{b(!f)},ce=()=>{I(!L)},ue=()=>{O(!E)},de=(t,n,l,r,i)=>{const a=JSON.parse(JSON.stringify(t));a.forEach((e=>{e.layerId===i&&(e.selected=!e.selected)})),n((0,e.Immutable)(a)),r.current=a;const o=[];a.forEach((e=>{e.selected&&o.push(e.layerId)})),l((0,e.Immutable)(o))};return(0,e.jsx)("div",{css:A},(0,e.jsx)(n.CollapsablePanel,{className:"swipe-collapse",label:D("leadingLayers"),isOpen:g,"aria-label":D("leadingLayers"),onRequestOpen:oe,onRequestClose:oe},(null===(a=null==s?void 0:s[null==c?void 0:c.id])||void 0===a?void 0:a.leadingLayersId.length)>0?(0,e.jsx)(h,{layerList:T,onChange:e=>{de(T,$,Y,F,e)},isAllowDeactivateLayers:u}):(0,e.jsx)(x,{swipeLayerMode:!0}),(null==Z?void 0:Z.length)>0&&(0,e.jsx)(n.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:D("runtimeLayers"),isOpen:f,"aria-label":D("runtimeLayers"),onRequestOpen:se,onRequestClose:se,rightIcon:M(),rightActiveIcon:S()},(0,e.jsx)(h,{layerList:Z,isAllowDeactivateLayers:!0,onChange:e=>{de(Z,z,ee,W,e)}}))),(0,e.jsx)(n.CollapsablePanel,{className:"swipe-collapse",label:D("trailingLayers"),isOpen:E,"aria-label":D("trailingLayers"),onRequestOpen:ue,onRequestClose:ue},(null===(o=null==s?void 0:s[null==c?void 0:c.id])||void 0===o?void 0:o.trailingLayersId.length)>0?(0,e.jsx)(h,{layerList:q,onChange:e=>{de(q,_,K,B,e)},isAllowDeactivateLayers:u}):(0,e.jsx)(x,{swipeLayerMode:!0}),(null==H?void 0:H.length)>0&&(0,e.jsx)(n.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:D("runtimeLayers"),isOpen:L,"aria-label":D("runtimeLayers"),onRequestOpen:ce,onRequestClose:ce,rightIcon:M(),rightActiveIcon:S()},(0,e.jsx)(h,{layerList:H,isAllowDeactivateLayers:!0,onChange:e=>{de(H,J,ne,U,e)}}))))}const A=e.css`
.swipe-collapse {
  margin-top: 16px;
  .title {
    font-weight: 600;
  }
}
.runtime-layer-collapse {
  .title {
    font-size: 13px;
    font-weight: 500;
  }
}
.layer-list {
  margin-top: 12px;
  margin-bottom: 16px;
}
.no-layer-placeholder {
  margin-top: 16px;
  margin-bottom: 16px;
}
`;var O=c(54020);const P=(e,t)=>{if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return!1;const n=[...e].sort(),l=[...t].sort();for(let e=0;e<n.length;e++)if(n[e]!==l[e])return!1;return!0},k=n=>{var l;return(null===(l=e.DataSourceManager.getInstance().getDataSource(n))||void 0===l?void 0:l.type)===t.DataSourceTypes.WebMap};const{useRef:R,useEffect:N,useState:D}=e.React,T="\n  position: absolute;\n  border: 1px solid rgba(110,110,110,.5);\n",$="\n  width: 32px;\n  height: 32px;\n  border: 1px solid rgba(110,110,110,.5);\n  borderRadius: 2px;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n";function q(t){var n,l,i,a,o,s;const{activeMapView:c,inactiveMapView:u,jimuMapViewGroup:d,widgetId:p,swipeMode:v,swipeStyle:m,sliderPosition:h,mapUseDataSourcesOrderList:y,mapUseDataSources:g,dividerColor:w,handlerColor:f,isDesignMode:x}=t,b=null===(l=null===(n=(0,e.getAppStore)().getState())||void 0===n?void 0:n.appContext)||void 0===l?void 0:l.isRTL,L=c.mapWidgetId,S=R(null===(i=c.view)||void 0===i?void 0:i.width),I=R(null===(a=c.view)||void 0===a?void 0:a.height),M=`jimu-widget-swipe-${p}-handle-container`,j=P(g,y)?y:g,C=R((null==j?void 0:j[0])===(null==c?void 0:c.dataSourceId)),V=R(!1),E=R(!1),A=R(!1),k=R(!1),q={x:0,y:0},_=R(document.querySelector(`div[data-widgetid=${L}] .multi-map-container`)),Z=R(null===(o=_.current)||void 0===o?void 0:o.querySelector(".multisourcemap-item-appear-noanimate")),z=R(null===(s=_.current)||void 0===s?void 0:s.querySelector(".multisourcemap-item-disappear-noanimate"));if(m===r.SimpleVertical)q.y=I.current*h.distance*.01;else{const e=b?100-h.distance:h.distance;q.x=S.current*e*.01}const[H,J]=D(q),F=R(),B=R(),W=R(c.isClickOpenPopupEnabled()),U=R(c.isClickHighlightEnabled()),G=R(u.isClickOpenPopupEnabled()),Y=R(u.isClickHighlightEnabled());N((()=>{c.isCached()||(_.current.style.pointerEvents=x?"none":null)}),[x]),N((()=>()=>{_.current&&(_.current.style.pointerEvents=null)}),[]),e.hooks.useUpdateEffect((()=>{C.current=!C.current}),[c]),N((()=>{if(!c.isCached())return Z.current=_.current.querySelector(".multisourcemap-item-appear-noanimate"),z.current=_.current.querySelector(".multisourcemap-item-disappear-noanimate"),E.current=!1,V.current=!1,X(),K(),Q(),ee(),te(),re(),d.hideMapTools(),()=>{ne()}}),[c]),N((()=>{const e=c.view.on("resize",(e=>{S.current=e.width,I.current=e.height,ne(),Q(),ee(),te(),re(),d.hideMapTools()}));return()=>{e.remove()}}),[c]),N((()=>{const e=()=>{V.current=!1},t=()=>{_.current=document.querySelector(`div[data-widgetid=${L}] .multi-map-container`),Z.current=_.current.querySelector(".multisourcemap-item-appear-noanimate"),z.current=_.current.querySelector(".multisourcemap-item-disappear-noanimate"),Q(),ee(),te(),re(),d.hideMapTools(),K()};return c.addCacheListener(e),c.addRestoreListener(t),()=>{c.removeCacheListener(e),c.removeRestoreListener(t),ne()}}),[c]),N((()=>{c.isCached()||(B.current.style.backgroundColor=w,B.current.querySelector(".handler").style.backgroundColor=f)}),[c,w,f]),N((()=>{J(q)}),[v]),e.hooks.useUpdateEffect((()=>{if(c.isCached())return;C.current=!C.current,z.current&&(z.current.style.clipPath=null);const e=(null==j?void 0:j[0])===(null==c?void 0:c.dataSourceId);if(m===r.SimpleVertical){const t=e?I.current-H.y:H.y;Z.current&&(Z.current.style.clipPath=e?`inset(0px 0px ${t}px 0px)`:`inset(${t}px 0px 0px 0px)`)}else{const t=e?S.current-H.x:H.x;Z.current&&(Z.current.style.clipPath=e?`inset(0px ${t}px 0px 0px)`:`inset(0px 0px 0px ${t}px)`)}}),[j]),N((()=>{if(c.isCached())return;const e={x:0,y:0},t=document.querySelector(`.jimu-widget-swipe-${p}-handle-container`);if(m===r.SimpleVertical)e.y=I.current*h.distance*.01,t.style.transform=`translateY(${e.y}px)`;else{const n=b?100-h.distance:h.distance;e.x=S.current*n*.01;const l=b?-(S.current-e.x):e.x;t.style.transform=`translateX(${l}px)`}ee(e),J(e),d.hideMapTools()}),[h,p,m,b]);const X=()=>{c.view.popupEnabled&&c.view.closePopup(),u.view.popupEnabled&&u.view.closePopup()},K=()=>{c.disableClickOpenPopup(),c.disableClickHighlight(),u.disableClickOpenPopup(),u.disableClickHighlight()},Q=()=>{(z.current||Z.current)&&z.current&&(z.current.style.opacity="1")},ee=e=>{const t=e||H;if(z.current&&(z.current.style.clipPath=null),m===r.SimpleVertical){const e=C.current?I.current-t.y:t.y;Z.current&&(Z.current.style.clipPath=C.current?`inset(0px 0px ${e}px 0px)`:`inset(${e}px 0px 0px 0px)`)}else{const e=C.current?S.current-t.x:t.x;Z.current&&(Z.current.style.clipPath=C.current?`inset(0px ${e}px 0px 0px)`:`inset(0px 0px 0px ${e}px)`)}},te=()=>{var e;if(document.getElementsByClassName(M)[0])return!1;(()=>{if(m===r.SimpleVertical){B.current=document.createElement("div"),B.current.className=M,B.current.setAttribute("style",T),B.current.style.transform=`translateY(${H.y}px)`,B.current.style.width=`${S.current}px`,B.current.style.height="4px",B.current.style.backgroundColor=w,B.current.style.zIndex="1";const e=document.createElement("div");e.className="handler esri-swipe__handle-icon esri-icon-drag-horizontal",e.setAttribute("style",$),e.style.top="-13px",e.style.backgroundColor=f,e.style.left="50%",e.style.marginLeft="-16px",e.style.cursor="row-resize",B.current.appendChild(e)}else{B.current=document.createElement("div"),B.current.className=M,B.current.setAttribute("style",T);const e=b?-(S.current-H.x):H.x;B.current.style.transform=`translateX(${e}px)`,B.current.style.height=`${I.current}px`,B.current.style.width="4px",B.current.style.backgroundColor=w,B.current.style.zIndex="1";const t=document.createElement("div");t.className="handler esri-swipe__handle-icon esri-icon-drag-vertical",t.setAttribute("style",$),t.style.left="-13px",t.style.backgroundColor=f,t.style.top="50%",t.style.marginTop="-16px",t.style.cursor="col-resize",B.current.appendChild(t)}})(),null===(e=_.current)||void 0===e||e.appendChild(B.current),F.current=(e=>{var t,n;return e&&m===r.SimpleVertical?null===(t=(0,O.interact)(e))||void 0===t?void 0:t.draggable({startAxis:"y",lockAxis:"y",listeners:{move(e){H.y+=e.dy,H.y=H.y>I.current?I.current:H.y>0?H.y:0,J(H),ee(H),e.target.style.transform=`translateY(${H.y}px)`}}}):e&&m===r.SimpleHorizontal?null===(n=(0,O.interact)(e))||void 0===n?void 0:n.draggable({startAxis:"x",lockAxis:"x",listeners:{move(e){H.x+=e.dx,H.x=H.x>S.current?S.current:H.x>0?H.x:0,J(H),ee(H);const t=b?-(S.current-H.x):H.x;e.target.style.transform=`translateX(${t}px)`}}}):void 0})(B.current)},ne=()=>{V.current=!1,document.getElementsByClassName(M)[0]&&_.current&&B.current&&_.current.removeChild(B.current),F.current&&F.current.unset(),d.showMapTools(),(z.current||Z.current)&&(z.current&&(z.current.style.opacity=null),Z.current&&(Z.current.style.clipPath=null),z.current&&(z.current.style.clipPath=null),Z.current&&(Z.current.style.opacity=null)),_.current.removeEventListener("mousedown",ie),_.current.removeEventListener("click",ae),_.current.removeEventListener("wheel",ae),c.isDestroyed()||(W.current?c.enableClickOpenPopup():c.disableClickOpenPopup(),U.current?c.enableClickHighlight():c.disableClickHighlight()),u.isDestroyed()||(G.current?u.enableClickOpenPopup():u.disableClickOpenPopup(),Y.current?u.enableClickHighlight():u.disableClickHighlight())},le=()=>{return e=this,t=void 0,l=function*(){yield d.switchMap(!0),k.current=!1},new((n=void 0)||(n=Promise))((function(r,i){function a(e){try{s(l.next(e))}catch(e){i(e)}}function o(e){try{s(l.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}s((l=l.apply(e,t||[])).next())}));var e,t,n,l},re=()=>{z.current&&!V.current&&(_.current.addEventListener("mousedown",ie),_.current.addEventListener("click",ae),_.current.addEventListener("wheel",ae),V.current=!0)},ie=e=>{e.target.classList.contains("multi-map-container")?A.current=!0:A.current=!1},ae=e=>{if(e.target.classList.contains("multi-map-container")&&A.current){if(E.current||k.current)return;E.current=!0,k.current=!0,le()}};return null}function _(l){const{mapUseDataSourcesOrderList:r,mapUseDataSources:i}=l,a=P(i,r)?r:i,o=t=>{if(!t)return"";const n=e.DataSourceManager.getInstance().getDataSource(t);return(null==n?void 0:n.getLabel())||(null==n?void 0:n.getDataSourceJson().sourceLabel)||t},s=n=>{var l;return c((null===(l=e.DataSourceManager.getInstance().getDataSource(n))||void 0===l?void 0:l.type)===t.DataSourceTypes.WebMap?46771:91915)};return(0,e.jsx)("div",{css:Z},(0,e.jsx)("div",{className:"swipe-maps-panel"},(0,e.jsx)("div",{className:"swipe-maps-list d-flex justify-content-start"},(0,e.jsx)("div",{className:"d-flex flex-shrink-0 justify-content-center align-items-center swipe-maps-thumbnail"},(0,e.jsx)(n.Icon,{size:"12",color:"#FFFFFF",icon:s(a[0])})),(0,e.jsx)("div",{title:o(a[0]),className:"swipe-maps-label text-truncate"},o(a[0]))),(0,e.jsx)("div",{className:"swipe-maps-list d-flex justify-content-start"},(0,e.jsx)("div",{className:"d-flex flex-shrink-0 justify-content-center align-items-center swipe-maps-thumbnail"},(0,e.jsx)(n.Icon,{size:"12",color:"#FFFFFF",icon:s(a[1])})),(0,e.jsx)("div",{title:o(a[1]),className:"swipe-maps-label text-truncate"},o(a[1])))))}const Z=e.css`
.swipe-maps-panel {
  margin-top: 16px;
  .swipe-maps-list{
    width: 100%;
    margin-bottom: 14px;
    .swipe-maps-thumbnail {
      width:  20px;
      height:  20px;
      background-color: #089BDC;
      margin-right: 8px;
    }
    .swipe-maps-label {
      font-size: 13px;
      font-weight: 500;
      color: var(--dark-800);
    }
  }
}
`;const{useState:z,useEffect:H,useRef:J}=e.React,F="\n  position: absolute;\n  border: 1px solid rgba(110,110,110,.5);\n";function B(e){const{jimuMapViewGroup:t,widgetId:n,activeMapView:l,inactiveMapView:i,firstTrailingLayersId:a,secondTrailingLayersId:o,swipeStyle:c,handleScrollingLayerOfFirstMapView:u,handleScrollingLayerOfSecondMapView:d,handleScrollFirstMapView:p,dividerColor:v,isDesignMode:m}=e,h=l.mapWidgetId,y=J(null),g=J(null),[w,f]=z(0),[x,b]=z((null==a?void 0:a.length)>0),L=J(x),[S,I]=z(null==l?void 0:l.view.height),[M,j]=z(null==l?void 0:l.view.width),C=J(document.querySelector(`div[data-widgetid=${h}] .multi-map-container`)),V=e=>{var t;return null===(t=e.current)||void 0===t?void 0:t.querySelector(".multisourcemap-item-appear-noanimate")},E=J(V(C)),A=e=>{var t;return null===(t=e.current)||void 0===t?void 0:t.querySelector(".multisourcemap-item-disappear-noanimate")},O=J(A(C)),P=J([]),R=null==l?void 0:l.view,N=J(0),D=J(!1),T=J(!1),$=J(0),q=J(0),_=J(null),Z=J(null),B=J(null),[W,U]=z(0),G=J([]),Y=J(0),X=`jimu-widget-swipe-${n}-handle-container`,K=`jimu-widget-swipe-${n}-scroller`,Q=`jimu-widget-swipe-${n}-content`,ee=J(),te=J(!0),ne=J(!0),le=(e,t)=>{return n=this,l=void 0,i=function*(){return yield e.whenJimuLayerViewLoaded(t)},new((r=void 0)||(r=Promise))((function(e,t){function a(e){try{s(i.next(e))}catch(e){t(e)}}function o(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,o)}s((i=i.apply(n,l||[])).next())}));var n,l,r,i};H((()=>{C.current.style.pointerEvents=m?"none":null}),[m]),H((()=>()=>{C.current.style.pointerEvents=null}),[]),H((()=>{I(null==l?void 0:l.view.height),j(null==l?void 0:l.view.width)}),[l]),H((()=>{const e=()=>{E.current=V(C),O.current=A(C),L.current||void 0===o||0===o.length||(c===r.AdvancedVertical?E.current.style.clipPath=`inset(0px 0px ${l.view.width}px 0px)`:E.current.style.clipPath=`inset(0px ${l.view.height}px 0px 0px)`),(null==o?void 0:o.length)>0&&(O.current.style.opacity="1")};return l.addRestoreListener(e),()=>{l.removeRestoreListener(e)}}),[l,h,o,c]),H((()=>{const e=()=>{t.hideMapTools()};function u(){var e;const t=c===r.AdvancedVertical?"vertical":"horizontal",l=null===(e=null==o?void 0:o.asMutable())||void 0===e?void 0:e.map((e=>le(i,e)));l&&Promise.all(l).then((e=>{var l,r;const a=e.map((e=>e.layer));G.current=null==a?void 0:a.map((e=>new s.default({id:n,view:null==i?void 0:i.view,disabled:!0,position:100,direction:t,trailingLayers:[e],visibleElements:{handle:!1,divider:!0}})));const o=null===(l=null==G?void 0:G.current)||void 0===l?void 0:l[0];null===(r=null==i?void 0:i.view)||void 0===r||r.ui.add(o),null==o||o.leadingLayers.addMany(o.trailingLayers),null==o||o.trailingLayers.removeAll(),te.current=!0}))}function d(){function e(){c===r.AdvancedVertical?t(Z.current.scrollTop-S*((null==a?void 0:a.length)||0)):t(Z.current.scrollLeft-M*((null==a?void 0:a.length)||0))}function t(e){Y.current=e,T.current||(requestAnimationFrame((()=>{var e,t;T.current=!1;const n=c===r.AdvancedVertical?Y.current/R.height:Y.current/R.width,l=(null===(e=null==G?void 0:G.current)||void 0===e?void 0:e.length)-1;null===(t=null==G?void 0:G.current)||void 0===t||t.forEach(((e,t,r)=>{var a;null===(a=null==i?void 0:i.view)||void 0===a||a.ui.add(e),e.when((()=>{C.current.querySelectorAll(".esri-swipe__divider").forEach((function(e){e.style.backgroundColor=v}))}));let o=100*(t-n);0===t&&e.leadingLayers.length&&te.current&&(e.trailingLayers.addMany(e.leadingLayers),e.leadingLayers.removeAll(),te.current=!1),o<0&&e.trailingLayers.length?(e.leadingLayers.addMany(e.trailingLayers),e.trailingLayers.removeAll(),U(t)):o>=0&&e.leadingLayers.length&&(e.trailingLayers.addMany(e.leadingLayers),e.leadingLayers.removeAll(),U(t)),o>=0&&o<.1&&t===l&&U(t),o<0&&(o+=100),e.position=re(o,0,100)}))})),T.current=!0)}function n(){c===r.AdvancedVertical?t(Z.current.scrollTop-S*((null==a?void 0:a.length)||0)):t(Z.current.scrollLeft-M*((null==a?void 0:a.length)||0))}(()=>{const e=C.current.querySelector(`#${K}`),t=C.current.querySelector(`#${Q}`);Z.current=e,B.current=t})(),(()=>{var t;const l=c===r.AdvancedVertical?"vertical":"horizontal",a=null===(t=null==o?void 0:o.asMutable())||void 0===t?void 0:t.map((e=>le(i,e)));a&&Promise.all(a).then((t=>{var r,a;"vertical"===l?null===(r=null==i?void 0:i.view)||void 0===r||r.watch("height",n):null===(a=null==i?void 0:i.view)||void 0===a||a.watch("width",n),n(),Z.current.addEventListener("scroll",e),"horizontal"===l&&Z.current.addEventListener("wheel",ae)}))})()}function p(){c===r.AdvancedVertical?m(y.current.scrollTop):m(y.current.scrollLeft)}function m(e){N.current=e,D.current||(requestAnimationFrame((()=>{var e;D.current=!1;const t=c===r.AdvancedVertical?N.current/R.height:N.current/R.width,n=(null===(e=P.current)||void 0===e?void 0:e.length)-1;P.current.forEach(((e,l,s)=>{R.ui.add(e),e.when((()=>{C.current.querySelectorAll(".esri-swipe__divider").forEach((function(e){e.style.backgroundColor=v}))}));let u=100*(l-t);u<0&&e.trailingLayers.length?(e.leadingLayers.addMany(e.trailingLayers),e.trailingLayers.removeAll(),f(l)):u>=0&&e.leadingLayers.length&&(e.trailingLayers.addMany(e.leadingLayers),e.leadingLayers.removeAll(),f(l)),(0===u||u<-100)&&(i&&k(i.dataSourceId)&&(null==o?void 0:o.length)>0&&ne.current&&(function(){const e=()=>{const e=C.current.querySelector(`#${K}`),t=(null==a?void 0:a.length)>0?S*((null==a?void 0:a.length)-1):0;$.current=e.scrollTop-t,E.current.style.clipPath=`inset(0px 0px ${$.current}px 0px)`,$.current<S&&(b(!0),L.current=!0),$.current>=S&&(d(),b(!1),L.current=!1)},t=e=>{e.preventDefault();const t=C.current.querySelector(`#${K}`),n=(null==a?void 0:a.length)>0?M*((null==a?void 0:a.length)-1):0;q.current=t.scrollLeft-n,E.current.style.clipPath=`inset(0px ${q.current}px 0px 0px)`,q.current<M&&b(!0),q.current>=M&&(d(),b(!1))};var n,l,i,o;(()=>{const n=C.current.querySelector(`#${K}`);_.current=n,c===r.AdvancedVertical?n.addEventListener("scroll",e):n.addEventListener("scroll",t)})(),O.current.style.opacity="1",c===r.AdvancedVertical?(ee.current=document.createElement("div"),ee.current.id=X,ee.current.setAttribute("style",F),ee.current.style.transform=`translateY(${S}px`,ee.current.style.width=`${M}px`,ee.current.style.height="4px",ee.current.style.backgroundColor=v,ee.current.style.zIndex=null===(l=null===(n=E.current)||void 0===n?void 0:n.style)||void 0===l?void 0:l.zIndex):(ee.current=document.createElement("div"),ee.current.id=X,ee.current.setAttribute("style",F),ee.current.style.transform=`translateX(${M})px`,ee.current.style.height=`${S}px`,ee.current.style.width="4px",ee.current.style.backgroundColor=v,ee.current.style.zIndex=null===(o=null===(i=E.current)||void 0===i?void 0:i.style)||void 0===o?void 0:o.zIndex),C.current.appendChild(ee.current)}(),ne.current=!1),l===n&&f(l)),u<0&&(u+=100),e.position=re(u,0,100)}))})),D.current=!0)}function h(){c===r.AdvancedVertical?m(y.current.scrollTop):m(y.current.scrollLeft)}return(null==l?void 0:l.view)&&C.current&&(function(){const e=document.createElement("div");e.id=K;const t=document.createElement("div");t.className="content",c===r.AdvancedVertical?(e.setAttribute("style","\n  position: absolute;\n  overflow-y: scroll;\n  z-index: 7;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n"),t.setAttribute("style","\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flexDirection: column;\n  alignItems: stretch;\n  alignContent: stretch;\n  justifyContent: space-evenly;\n"),t.style.height=S*(((null==a?void 0:a.length)||0)+((null==o?void 0:o.length)||0))+"px"):(e.setAttribute("style","\n  position: absolute;\n  overflow-x: scroll;\n  z-index: 7;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n"),t.setAttribute("style","\n  padding: 0;\n  margin: 0;\n  height: 100%;\n  display: flex;\n  flexDirection: row;\n  alignItems: stretch;\n  alignContent: stretch;\n  justifyContent: space-evenly;\n"),t.style.width=M*(((null==a?void 0:a.length)||0)+((null==o?void 0:o.length)||0))+"px"),C.current.appendChild(e),e.appendChild(t),y.current=e,g.current=t}(),(null==a?void 0:a.length)>0?(function(){var e;const t=c===r.AdvancedVertical?"vertical":"horizontal",i=null===(e=null==a?void 0:a.asMutable())||void 0===e?void 0:e.map((e=>le(l,e)));i&&Promise.all(i).then((e=>{const r=e.map((e=>e.layer));P.current=null==r?void 0:r.map((e=>new s.default({id:n,view:null==l?void 0:l.view,disabled:!0,position:100,direction:t,trailingLayers:[e],visibleElements:{handle:!1,divider:!0}}))),"vertical"===t?R.watch("height",h):R.watch("width",h),h(),y.current.addEventListener("scroll",p),"horizontal"===t&&y.current.addEventListener("wheel",ie)}))}(),i&&u(),e(),ne.current=!0):(null==o?void 0:o.length)>0&&(O.current.style.opacity="1",c===r.AdvancedVertical?E.current.style.clipPath=`inset(0px 0px ${l.view.width}px 0px)`:E.current.style.clipPath=`inset(0px ${l.view.height}px 0px 0px)`,b(!1),L.current=!1,i&&u(),d(),e())),()=>{var e;(function(){var e;const n=C.current.querySelector(`#${K}`);n&&C.current.removeChild(n),null===(e=null==P?void 0:P.current)||void 0===e||e.forEach(((e,t,n)=>{var l;e.position=0,e.leadingLayers.removeAll(),e.trailingLayers.removeAll(),null===(l=R.ui)||void 0===l||l.remove(e)})),t.showMapTools()})(),null===(e=null==G?void 0:G.current)||void 0===e||e.forEach(((e,t,n)=>{var l,r;e.position=0,e.leadingLayers.removeAll(),e.trailingLayers.removeAll(),null===(r=null===(l=null==i?void 0:i.view)||void 0===l?void 0:l.ui)||void 0===r||r.remove(e)})),b(!0),function(){const e=C.current.querySelector(".scrollerMap");e&&C.current.removeChild(e),O.current&&(O.current.style.opacity=null),E.current&&(E.current.style.clipPath=null),ee.current&&C.current.querySelector(`#${X}`)&&C.current.contains(ee.current)&&C.current.removeChild(ee.current)}()}}),[n,R,l,a,o,c,v,X,S,M,K,Q,i,t]),H((()=>{var e;const t=null===(e=null==a?void 0:a.asMutable())||void 0===e?void 0:e.map((e=>le(l,e)));t&&Promise.all(t).then((e=>{u(e[w])}))}),[l,a,w,u]),H((()=>{var e;const t=null===(e=null==o?void 0:o.asMutable())||void 0===e?void 0:e.map((e=>le(i,e)));t&&Promise.all(t).then((e=>{d(e[W])}))}),[o,W,i,d]),H((()=>{p(x)}),[p,x]);const re=(e,t,n)=>Math.min(n,Math.max(t,e)),ie=e=>{e.preventDefault();const t=-e.wheelDelta||30*-e.deltaY;y.current.scrollLeft=y.current.scrollLeft+t/2},ae=e=>{e.preventDefault();const t=-e.wheelDelta||30*-e.deltaY;Z.current.scrollLeft=Z.current.scrollLeft+t/2};return null}var W=c(9600);const{useState:U,useEffect:G,useRef:Y}=e.React;function X(t){var r,i;const{scrollMapViewList:a,activeMapView:o,inactiveMapView:s,handlePanelSelectedFirstScrollLayer:c,handlePanelSelectedSecondScrollLayer:u,isAllowDeactivateLayers:d,scrollingLayerOfFirstMapView:p,scrollingLayerOfSecondMapView:v,scrollFirstMapView:m,showSwipeOnMap:y,runtimeActiveMapViewAddedLayers:g,runtimeInactiveMapViewAddedLayers:w,handleRuntimePanelSelectedFirstScrollLayer:f,handleRuntimePanelSelectedSecondScrollLayer:b}=t,[L,I]=U(!1),[j,C]=U(!1),[V,E]=U(!1),[A,O]=U(!1),P=Y(null),R=e.React.useRef([]),N=e.React.useRef([]),D=e.hooks.useTranslation(l);G((()=>{s||u((0,e.Immutable)([]))}),[u,s]);const[T,$]=U(null),q=Y(T),[_,Z]=U((0,e.Immutable)([])),[z,H]=U([]),J=Y(z),[F,B]=U((0,e.Immutable)([])),[X,Q]=U([]),ee=Y(X),[te,ne]=U((0,e.Immutable)([])),[le,re]=U(null),ie=Y(le),[ae,oe]=U((0,e.Immutable)([]));G((()=>{const e=null==a?void 0:a[null==o?void 0:o.id];Z(e)}),[a,o]),G((()=>{const e=null==a?void 0:a[null==s?void 0:s.id];oe(e)}),[a,s]);const se=(e,t)=>{return n=this,l=void 0,i=function*(){return yield e.whenJimuLayerViewLoaded(t)},new((r=void 0)||(r=Promise))((function(e,t){function a(e){try{s(i.next(e))}catch(e){t(e)}}function o(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,o)}s((i=i.apply(n,l||[])).next())}));var n,l,r,i},ce=e.hooks.useEventCallback((()=>{const e=P.current,t=document.querySelector(".currentLegend");if(t&&t.remove(),y&&((null==_?void 0:_.length)>0||(null==ae?void 0:ae.length)>0)){const t=document.createElement("div");t.className="currentLegend",new W.default({view:m?null==o?void 0:o.view:null==s?void 0:s.view,style:"classic",layerInfos:[{layer:m?null==p?void 0:p.layer:null==v?void 0:v.layer}]}).container=t,e.appendChild(t)}})),ue=e.hooks.useEventCallback(((t,n,l,r,i)=>{var o,s;const c=null===(s=null===(o=null==a?void 0:a[null==t?void 0:t.id])||void 0===o?void 0:o.asMutable())||void 0===s?void 0:s.map((e=>se(t,e)));c&&Promise.all(c).then((t=>{const a=t.map((e=>({layerId:e.id,title:null==e?void 0:e.layer.title,selected:!0,visible:null==e?void 0:e.layer.visible,allowOperation:d})));n(a),r.current=a;const o=[];a.forEach((e=>{e.selected&&e.visible&&o.push(e.layerId)})),l((0,e.Immutable)(o)),i((0,e.Immutable)(o))})).catch((e=>{console.error(e)}))}));G((()=>{ue(o,$,Z,q,c),ue(s,re,oe,ie,u)}),[a,o,s,d,c,u,ue]),G((()=>{if((null==o?void 0:o.id)===(null==s?void 0:s.id))return;const t=null==g?void 0:g.asMutable({deep:!0}).map((e=>{const t=o.jimuLayerViews[e];return{layerId:e,title:t.layer.title,selected:!1,visible:t.layer.visible,allowOperation:!0}}));H(t),J.current=t;const n=[];if(t.forEach((e=>{e.selected&&e.visible&&n.push(e.layerId)})),B((0,e.Immutable)(n)),f((0,e.Immutable)(n)),s){const t=null==w?void 0:w.asMutable({deep:!0}).map((e=>{const t=s.jimuLayerViews[e];return{layerId:e,title:t.layer.title,selected:!1,visible:t.layer.visible,allowOperation:!0}}));Q(t),ee.current=t;const n=[];t.forEach((e=>{e.selected&&e.visible&&n.push(e.layerId)})),ne((0,e.Immutable)(n)),b((0,e.Immutable)(n))}}),[o,f,b,s,g,w]);const de=e.hooks.useEventCallback(((t,n,l,r,i)=>{var o,s;const c=null===(s=null===(o=null==a?void 0:a[null==t?void 0:t.id])||void 0===o?void 0:o.asMutable())||void 0===s?void 0:s.map((e=>se(t,e)));c&&Promise.all(c).then((t=>{t.forEach((t=>{const a=[];a.push(null==t?void 0:t.layer.watch("visible",(()=>{const n=null==t?void 0:t.layer.visible,a=JSON.parse(JSON.stringify(l.current));a.forEach((e=>{e.layerId===t.id&&(e.visible=n)})),r(a),l.current=a;const o=[];null==a||a.forEach((e=>{e.selected&&e.visible&&o.push(e.layerId)})),i((0,e.Immutable)(o))}))),n.current=a}))}))}));G((()=>{const e=R.current;return de(o,R,q,$,c),()=>{e.forEach((e=>{null==e||e.remove()}))}}),[a,o,de,c]);const pe=e.hooks.useEventCallback(((t,n,l,r,i,a)=>{n.forEach((n=>{const o=t.jimuLayerViews[n.layerId],s=[];s.push(null==o?void 0:o.layer.watch("visible",(()=>{const t=null==o?void 0:o.layer.visible,n=JSON.parse(JSON.stringify(l.current));n.forEach((e=>{e.layerId===o.id&&(e.visible=t)})),r(n),l.current=n;const a=[];null==n||n.forEach((e=>{e.selected&&e.visible&&a.push(e.layerId)})),i((0,e.Immutable)(a))}))),a.current=s}))}));G((()=>{const e=N.current;return pe(o,z,J,H,f,N),()=>{e.forEach((e=>{null==e||e.remove()}))}}),[o,f,z,pe]),G((()=>{c(_)}),[c,_]),G((()=>{f(F)}),[f,F]),G((()=>{b(te)}),[b,te]),G((()=>{u(ae)}),[u,ae]),G((()=>{(p||v)&&ce()}),[ce,p,v,o,s,y,m,a,_,ae]);const ve=()=>{I(!L)},me=()=>{C(!j)},he=()=>{E(!V)},ye=()=>{O(!A)},ge=(t,n,l,r,i)=>{const a=JSON.parse(JSON.stringify(t));a.forEach((e=>{e.layerId===i&&(e.selected=!e.selected)})),n(a),r.current=a;const o=[];a.forEach((e=>{e.selected&&e.visible&&o.push(e.layerId)})),l((0,e.Immutable)(o))},we=t=>{if(!t)return"";const n=e.DataSourceManager.getInstance().getDataSource(t);return(null==n?void 0:n.getLabel())||(null==n?void 0:n.getDataSourceJson().sourceLabel)||t},fe=(e,t,n,l)=>{var r;return t?(null===(r=null==e?void 0:e[null==n?void 0:n.id])||void 0===r?void 0:r.indexOf(null==l?void 0:l.id))+1:-1},xe=(e,t)=>y?(null==e?void 0:e.indexOf(null==t?void 0:t.id))+1:-1;return(0,e.jsx)("div",{ref:P,css:K},(0,e.jsx)(n.CollapsablePanel,{className:(0,e.classNames)("swipe-collapse "+(y&&m?"scroll-now":"")),label:we(o.dataSourceId),isOpen:L,"aria-label":we(o.dataSourceId),onRequestOpen:ve,onRequestClose:ve},(null===(r=null==a?void 0:a[null==o?void 0:o.id])||void 0===r?void 0:r.length)>0?(0,e.jsx)(h,{layerList:T,onChange:e=>{ge(T,$,Z,q,e)},isAllowDeactivateLayers:d,highlightIndex:m?fe(a,y,o,p):-1}):(0,e.jsx)(x,{swipeLayerMode:!0}),(null==z?void 0:z.length)>0&&(0,e.jsx)(n.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:D("runtimeLayers"),isOpen:V,"aria-label":D("runtimeLayers"),onRequestOpen:he,onRequestClose:he,rightIcon:M(),rightActiveIcon:S()},(0,e.jsx)(h,{layerList:z,isAllowDeactivateLayers:!0,onChange:e=>{ge(z,H,B,J,e)},highlightIndex:m?xe(g,p):-1}))),s&&k(s.dataSourceId)&&(0,e.jsx)(n.CollapsablePanel,{className:(0,e.classNames)("swipe-collapse "+(y&&!m&&v?"scroll-now":"")),label:we(s.dataSourceId),isOpen:j,"aria-label":we(s.dataSourceId),onRequestOpen:me,onRequestClose:me},(null===(i=null==a?void 0:a[null==s?void 0:s.id])||void 0===i?void 0:i.length)>0?(0,e.jsx)(h,{layerList:le,onChange:e=>{ge(le,re,oe,ie,e)},isAllowDeactivateLayers:d,highlightIndex:m?-1:fe(a,y,s,v)}):(0,e.jsx)(x,{swipeLayerMode:!0}),(null==X?void 0:X.length)>0&&(0,e.jsx)(n.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:D("runtimeLayers"),isOpen:A,"aria-label":D("runtimeLayers"),onRequestOpen:ye,onRequestClose:ye,rightIcon:M(),rightActiveIcon:S()},(0,e.jsx)(h,{layerList:X,isAllowDeactivateLayers:!0,onChange:e=>{ge(X,Q,ne,ee,e)},highlightIndex:m?-1:xe(w,v)}))))}const K=e.css`
  .swipe-collapse {
    margin-top: 16px;
    .title {
      font-weight: 600;
    }
    .layer-list {
      margin-top: 12px;
      margin-bottom: 16px;
    }
    .no-layer-placeholder {
      margin-top: 16px;
      margin-bottom: 16px;
    }
  }
  .runtime-layer-collapse {
    .title {
      font-size: 13px;
      font-weight: 500;
    }
  }
  .currentLegend {
    margin-top: 8px;
    .esri-legend__message, .esri-legend__service{
      padding-left: 0px;
    }
  }
  .scroll-now {
    .collapse-label {
      position: relative;
      &:after {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        content: "";
        display: block;
        position: absolute;
        right: -10px;
        background-color: var(--primary);
      }
    }
  }
  .runtime-layer-collapse {
    .collapse-label {
      &:after {
        content: none
      }
    }
  }
`;var Q=c(79964),ee=c.n(Q);const te=t=>{const n=window.SVG,{className:l}=t,r=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(n[l[r]]=e[l[r]])}return n}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",l);return n?e.React.createElement(n,Object.assign({className:i,src:ee()},r)):e.React.createElement("svg",Object.assign({className:i},r))},ne=e.css`
  &.warning-info {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    .warning-icon {
      color: var(--warning-800);
      width: ${e.polished.rem(22)};
      height: ${e.polished.rem(22)};
      margin-bottom: ${e.polished.rem(10)};
    }
    .warning-text {
      font-size: ${e.polished.rem(13)};
      line-height: ${e.polished.rem(18)};
    }
  }
`;function le(){const t=e.hooks.useTranslation(l);return(0,e.jsx)("div",{className:"w-100 d-flex flex-column align-items-center warning-info",css:ne},(0,e.jsx)(te,{className:"warning-icon"}),(0,e.jsx)("div",{className:"warning-text"},t("webSceneNotSupported")))}r.SimpleHorizontal;const re={distance:35,unit:n.DistanceUnits.PERCENTAGE},ie=e.css`
  &{
    .widget-container {
      overflow: auto;
    }
    .swipe-panel {
      padding: ${e.polished.rem(16)};
    }
    .swipe-title {
      .swipe-label {
        font-size: ${e.polished.rem(14)};
        color: var(--black);
        span {
          margin-left: 0.5rem;
        }
      }
    }
    .error-alert {
      position: absolute;
      bottom: 4px;
      left: 4px;
      z-index: 1;
    }
  }
`,{useState:ae,useEffect:oe,useCallback:se,useRef:ce}=e.React,ue=a=>{var s,c,u,d,p,m,h;const{id:y,label:g,config:w}=a,{styleConfig:f,scrollMapViewList:x,swipeMapViewList:b,mapUseDataSourcesOrderList:L,swipeStyle:S,swipeMode:I}=w,{isAllowDeactivateLayers:M=!0,sliderPosition:j=re,dividerColor:C="var(--light)",handleColor:V="var(--light)"}=f||{},A=null===(s=a.useMapWidgetIds)||void 0===s?void 0:s[0],[O,P]=ae(null),[k,R]=ae(null),[N,D]=ae(null),[T,$]=ae(!1),[Z,z]=ae(null),[H,J]=ae(null),[F,W]=ae(!0),[U,G]=ae((0,e.Immutable)([])),[Y,K]=ae((0,e.Immutable)([])),[Q,ee]=ae((0,e.Immutable)([])),[te,ne]=ae((0,e.Immutable)([])),[ue,de]=ae((0,e.Immutable)([])),[pe,ve]=ae((0,e.Immutable)([])),[me,he]=ae((0,e.Immutable)([])),[ye,ge]=ae((0,e.Immutable)([])),[we,fe]=ae((0,e.Immutable)([])),[xe,be]=ae((0,e.Immutable)([])),[Le,Se]=ae((0,e.Immutable)([])),[Ie,Me]=ae(!1),[je,Ce]=ae(!0),[Ve,Ee]=ae(!0),[Ae,Oe]=ae(!0),[Pe,ke]=ae(!0),[Re,Ne]=ae((0,e.Immutable)([])),[De,Te]=ae((0,e.Immutable)([])),$e=ce(null),qe=e.hooks.useTranslation(l,n.defaultMessages),_e=S===r.SimpleHorizontal||S===r.SimpleVertical,Ze=e.ReactRedux.useSelector((e=>{var t,n;return null===(n=(null!==(t=e.appStateInBuilder)&&void 0!==t?t:e).appConfig.widgets[A])||void 0===n?void 0:n.useDataSources})),ze=e.ReactRedux.useSelector((t=>t.appRuntimeInfo.appMode===e.AppMode.Design));oe((()=>{Ie&&!$e.current&&($e.current=setTimeout((()=>{Me(!1),$e.current=null}),3e3))}),[Ie]),oe((()=>{const e=null==Ze?void 0:Ze.map((e=>e.dataSourceId));Se(e)}),[Ze]),oe((()=>{$(!1)}),[S,A]);const He=e=>{var t,n,l;const r=[],i=null===(l=null===(n=null===(t=null==e?void 0:e.view)||void 0===t?void 0:t.map)||void 0===n?void 0:n.layers)||void 0===l?void 0:l.toArray();return null==i||i.forEach((t=>{const n=e.getJimuLayerViewByAPILayer(t);(null==n?void 0:n.fromRuntime)&&r.push(n.id)})),r};oe((()=>{ne(U?U.concat(Q):Q)}),[U,Q]),oe((()=>{ve(Y?null==Y?void 0:Y.concat(ue):ue)}),[Y,ue]),oe((()=>{var n,l,r,i;const a=null==Ze?void 0:Ze.filter((e=>e.dataSourceId!==(null==O?void 0:O.dataSourceId))),o=A+"-"+(null===(n=null==a?void 0:a[0])||void 0===n?void 0:n.dataSourceId);const s=t.MapViewManager.getInstance().getJimuMapViewById(o);R(s);const c=He(O);Ne((0,e.Immutable)(c)),Oe(!0),ke(!0);const u=He(s);Te((0,e.Immutable)(u));const d=()=>{const t=He(O);Ne((0,e.Immutable)(t))};null==O||O.addJimuLayerViewCreatedListener(d);const p=null===(i=null===(r=null===(l=null==O?void 0:O.view)||void 0===l?void 0:l.map)||void 0===r?void 0:r.layers)||void 0===i?void 0:i.on("after-remove",(t=>{const n=He(O);Ne((0,e.Immutable)(n)),Oe(!0),ke(!0)}));return()=>{null==O||O.removeJimuLayerViewCreatedListener(d),null==p||p.remove()}}),[O,Ze,A]);const Je=()=>{if(!T){const e=document.querySelector(`.jimu-widget-swipe .useMapWidgetId-${A} .swipe-title .checked:not(.${y})`);e&&(Me(!0),e.getElementsByTagName("input")[0].click())}$(!T)},Fe=se((e=>{z(e)}),[]),Be=se((e=>{J(e)}),[]),We=se((e=>{W(e)}),[]),Ue=se((e=>{G(e),Ee(!0)}),[]),Ge=se((e=>{K(e),Ee(!0)}),[]),Ye=se((e=>{ee(e),ke(!0)}),[]),Xe=se((e=>{de(e),ke(!0)}),[]),Ke=se((e=>{he(e),Ce(!0)}),[]),Qe=se((e=>{ge(e),Ce(!0)}),[]),et=se((e=>{fe(e),Oe(!0)}),[]),tt=se((e=>{be(e),Oe(!0)}),[]),nt=!_e&&!!O&&(null==Le?void 0:Le.length)>0&&"2d"===(null===(c=null==O?void 0:O.view)||void 0===c?void 0:c.type)&&(null==N?void 0:N.jimuMapViews)&&Object.keys(null==N?void 0:N.jimuMapViews).length>0,lt=_e&&!!O&&"LOADED"===O.status&&"2d"===(null===(u=null==O?void 0:O.view)||void 0===u?void 0:u.type)&&I===i.SwipeBetweenLayers,rt=_e&&I===i.SwipeBetweenMaps&&(null==N?void 0:N.jimuMapViews)&&2===Object.keys(null==N?void 0:N.jimuMapViews).length&&2===Le.length,it=T&&S&&!_e&&"2d"===(null===(d=null==O?void 0:O.view)||void 0===d?void 0:d.type)&&(null==Le?void 0:Le.length)>0&&(null==N?void 0:N.jimuMapViews)&&Object.keys(null==N?void 0:N.jimuMapViews).length>0,at="2d"===(null===(p=null==O?void 0:O.view)||void 0===p?void 0:p.type)&&((null===(m=null==me?void 0:me.concat(we))||void 0===m?void 0:m.length)>0||(null===(h=null==ye?void 0:ye.concat(xe))||void 0===h?void 0:h.length)>0),ot=(null==N?void 0:N.jimuMapViews)&&2===Object.keys(null==N?void 0:N.jimuMapViews).length&&(null==O?void 0:O.view)&&(null==k?void 0:k.view);return(0,e.jsx)("div",{className:"jimu-widget jimu-widget-swipe",css:ie},A&&(0,e.jsx)(t.JimuMapViewComponent,{useMapWidgetId:A,onActiveViewChange:e=>{(null==e?void 0:e.view)?(P(e),Ce(!1),Ee(!1),Oe(!1),ke(!1)):P(null)},onViewsCreate:e=>{const n=t.MapViewManager.getInstance().getJimuMapViewGroup(A);D(n),Object.keys(e).forEach((t=>{const n=e[t];n.isActive||R(n)}))}}),A&&S?(0,e.jsx)("div",{className:"widget-container surface-1 border-0 w-100 h-100"},(()=>{var t,l;return(0,e.jsx)("div",{className:(0,e.classNames)(`swipe-panel useMapWidgetId-${A}`)},(0,e.jsx)("div",{className:"swipe-title d-flex justify-content-between"},(0,e.jsx)("div",{className:"swipe-label"},(0,e.jsx)(n.Icon,{icon:o()}),(0,e.jsx)("span",null,g)),(0,e.jsx)("div",null,(0,e.jsx)(n.Switch,{"aria-label":g,title:g,className:y,checked:T,onChange:Je}))),nt&&Pe&&(0,e.jsx)(X,{scrollMapViewList:x,activeMapView:O,inactiveMapView:k,handlePanelSelectedFirstScrollLayer:Ue,handlePanelSelectedSecondScrollLayer:Ge,isAllowDeactivateLayers:M,scrollingLayerOfFirstMapView:Z,scrollingLayerOfSecondMapView:H,scrollFirstMapView:F,showSwipeOnMap:T,runtimeActiveMapViewAddedLayers:Re,runtimeInactiveMapViewAddedLayers:De,handleRuntimePanelSelectedFirstScrollLayer:Ye,handleRuntimePanelSelectedSecondScrollLayer:Xe}),!_e&&"3d"===(null===(t=null==O?void 0:O.view)||void 0===t?void 0:t.type)&&(0,e.jsx)(le,null),_e&&"3d"===(null===(l=null==O?void 0:O.view)||void 0===l?void 0:l.type)&&I===i.SwipeBetweenLayers&&(0,e.jsx)(le,null),lt&&Ae&&(0,e.jsx)(E,{swipeMapViewList:b,activeMapView:O,isAllowDeactivateLayers:M,handlePanelSelectedLeadingLayers:Ke,handlePanelSelectedTrailingLayers:Qe,runtimeAddedLayers:Re,handleRuntimePanelSelectedLeadingLayers:et,handleRuntimePanelSelectedTrailingLayers:tt}),rt&&(0,e.jsx)(_,{mapUseDataSourcesOrderList:L,mapUseDataSources:Le}),Ie&&(0,e.jsx)(n.Alert,{className:"w-100 error-alert",form:"basic",open:!0,withIcon:!0,type:"warning",text:qe("mapOccupiedMsg")}))})()):(0,e.jsx)(n.WidgetPlaceholder,{icon:o(),message:qe("_widgetLabel")}),T&&S&&_e&&(I===i.SwipeBetweenLayers?at&&je&&(0,e.jsx)(v,{widgetId:y,activeMapView:O,leadingLayersId:me.concat(we),trailingLayersId:ye.concat(xe),swipeStyle:S,sliderPosition:j,dividerColor:C,handlerColor:V,isDesignMode:ze}):ot&&(0,e.jsx)(q,{swipeMode:I,widgetId:y,activeMapView:O,inactiveMapView:k,jimuMapViewGroup:N,sliderPosition:j,swipeStyle:S,mapUseDataSourcesOrderList:L,mapUseDataSources:Le,dividerColor:C,handlerColor:V,isDesignMode:ze})),it&&Ve&&(0,e.jsx)(B,{widgetId:y,activeMapView:O,inactiveMapView:k,jimuMapViewGroup:N,firstTrailingLayersId:te,secondTrailingLayersId:pe,swipeStyle:S,handleScrollingLayerOfFirstMapView:Fe,handleScrollingLayerOfSecondMapView:Be,handleScrollFirstMapView:We,dividerColor:C,isDesignMode:ze}))};function de(e){c.p=e}})(),u})())}}}));