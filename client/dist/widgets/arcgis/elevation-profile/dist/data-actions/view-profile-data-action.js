System.register(["jimu-core"],(function(t,e){var o={};return{setters:[function(t){o.AbstractDataAction=t.AbstractDataAction,o.DataLevel=t.DataLevel,o.DataSourceStatus=t.DataSourceStatus,o.MutableStoreManager=t.MutableStoreManager,o.getAppStore=t.getAppStore}],execute:function(){t((()=>{"use strict";var t={48891:t=>{t.exports=o}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return(()=>{n.r(i),n.d(i,{default:()=>o});var t=n(48891),e=function(t,e,o,n){return new(o||(o=Promise))((function(i,r){function a(t){try{u(n.next(t))}catch(t){r(t)}}function l(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(a,l)}u((n=n.apply(t,e||[])).next())}))};class o extends t.AbstractDataAction{isSupported(o,n){var i,r,a,l,u,d,v,c;return e(this,void 0,void 0,(function*(){if(o.length>1)return!1;const e=o[0],s=e.dataSource,p=function(){var e,o,n;return window.jimuConfig.isBuilder?null===(o=null===(e=(0,t.getAppStore)().getState())||void 0===e?void 0:e.appStateInBuilder)||void 0===o?void 0:o.appConfig:null===(n=(0,t.getAppStore)().getState())||void 0===n?void 0:n.appConfig}(),f=null===(i=null==p?void 0:p.widgets)||void 0===i?void 0:i[this.widgetId],g=null===(a=null===(r=f.config)||void 0===r?void 0:r.configInfo)||void 0===a?void 0:a[null===(l=null==f?void 0:f.config)||void 0===l?void 0:l.activeDataSource],S=(null==g?void 0:g.hasOwnProperty("advanceOptions"))?null==g?void 0:g.advanceOptions:null===(u=null==g?void 0:g.profileSettings)||void 0===u?void 0:u.isProfileSettingsEnabled;return!!S&&((!S||!(null===(d=null==g?void 0:g.profileSettings)||void 0===d?void 0:d.isCustomizeOptionEnabled)||0!==(null===(v=null==g?void 0:g.profileSettings)||void 0===v?void 0:v.layers.length))&&(!(!s||s.getStatus()===t.DataSourceStatus.NotReady)&&(!(!(null==s?void 0:s.supportSpatialInfo)||!(null==s?void 0:s.supportSpatialInfo()))&&n===t.DataLevel.Records&&("WEB_MAP"===s.type||"WEB_SCENE"===s.type||"FEATURE_LAYER"===s.type&&"esriGeometryPolyline"===(null===(c=null==s?void 0:s.getDataSourceJson())||void 0===c?void 0:c.geometryType))&&e.records.length>0&&n===t.DataLevel.Records&&("current"===e.type||"selected"===e.type))))}))}onExecute(o){return e(this,void 0,void 0,(function*(){const{records:e}=o[0];return t.MutableStoreManager.getInstance().updateStateValue(this.widgetId,"selectedFeatureRecords",e),!0}))}}})(),i})())}}}));